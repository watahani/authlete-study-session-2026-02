# 認可サーバー構築ハンズオン

このハンズオンでは JWT 形式のアクセストークンを発行する認可サーバーを構築します。
また MCP サーバーが JWT 形式のアクセストークンを検証できるよう、メタデーターを公開します。

## 概要

Authlete は OpenID Connect/OAuth エンジンを API として提供します。
認可サーバーの実装者はフロントエンドの認可サーバーを構築し、その認可サーバーの中で Authlete API を呼び出します。
今回のハンズオンでは http://localhost:9000 で動作する Web サーバーを認可サーバーのフロントエンドとして利用します。

![](https://www.authlete.com/img/developers/overview/authletes-role-in-authorization.png)

## 実装しない内容

以下はこのハンズオンでは実装しません。

* ユーザー認証とセッション管理 (デモユーザーが認証済みという前提で実装します)
* ユーザーが同意可能な権限の判定 (クライアントがリクエストした権限にはすべて同意可能とします)
* トークンに含めるクレームなどの判定 (あらかじめ設定したデモユーザーのクレームを埋め込みます)
* CSRF などのセキュリティ対策

時間に余裕があれば追加課題として取り組んでみても良いでしょう。

## ハンズオンのステップ

今回のハンズオンでは以下のステップで認可サーバーを実装します。

1. [Authlete 3.0 環境へのサインアップとサービス作成](./01-setup-authlete.md)
2. [認可サーバーの実装とサンプルクライアントでの動作確認](./02-implement-authorization-server.md)
3. [VS Code との連携確認](./03-call-mcp-tool-via-vscode.md)

最終的に VS Code を OAuth クライアントとして [apps/mcp-server](apps/mcp-server/index.ts) で実装されている MCP サーバーに対するトークンを認可コードフローで取得することを目的とします。

## 免責事項

本サンプルは Authlete を利用した実装の解説のためのサンプルコードであり、本番の認可サーバーを想定した実装ではありません。本実装を利用したことによる直接・間接的な損害・損失について、Authlete は一切の責任を負いません。